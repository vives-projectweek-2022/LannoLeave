\hypertarget{PicoLed_8hpp_source}{}\doxysection{Pico\+Led.\+hpp}
\label{PicoLed_8hpp_source}\index{/home/joey/Documents/School\_2021-\/2022-\/2/Projectweek/LannoLeave/software/libs/PicoLed/include/PicoLed.hpp@{/home/joey/Documents/School\_2021-\/2022-\/2/Projectweek/LannoLeave/software/libs/PicoLed/include/PicoLed.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef PICOLED\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define PICOLED\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <stdexcept>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}PicoLedController.hpp"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}WS2812B.hpp"{}}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{keyword}{using} std::map;}
\DoxyCodeLine{11 \textcolor{keyword}{using} std::shared\_ptr;}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{keyword}{namespace }PicoLed \{}
\DoxyCodeLine{14 }
\DoxyCodeLine{15     \textcolor{keyword}{class }\mbox{\hyperlink{classPicoLed_1_1InvalidPioBlock}{InvalidPioBlock}}: \textcolor{keyword}{public} std::exception \{}
\DoxyCodeLine{16     \};}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     \textcolor{keyword}{class }\mbox{\hyperlink{classPicoLed_1_1StateMachineInUse}{StateMachineInUse}}: \textcolor{keyword}{public} std::exception \{}
\DoxyCodeLine{19     \};}
\DoxyCodeLine{20 }
\DoxyCodeLine{21     \textcolor{keyword}{static} map<uint, map<uint, shared\_ptr<PicoLedTarget>>> targets;}
\DoxyCodeLine{22 }
\DoxyCodeLine{23     \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{24     \textcolor{keyword}{static} \mbox{\hyperlink{classPicoLed_1_1PicoLedController}{PicoLedController}} addLeds(PIO pioBlock, uint stateMachine, uint dataPin, uint numLeds, DataByte b1, DataByte b2, DataByte b3, DataByte b4) \{}
\DoxyCodeLine{25         uint pioIndex;}
\DoxyCodeLine{26         \textcolor{keywordflow}{if} (pioBlock == pio0) \{}
\DoxyCodeLine{27             pioIndex = 0;}
\DoxyCodeLine{28         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pioBlock == pio1) \{}
\DoxyCodeLine{29             pioIndex = 1;}
\DoxyCodeLine{30         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{31             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} InvalidPioBlock();}
\DoxyCodeLine{32         \}}
\DoxyCodeLine{33         \textcolor{keywordflow}{if} (targets[pioIndex].find(stateMachine) != targets[pioIndex].end()) \{}
\DoxyCodeLine{34             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} StateMachineInUse();}
\DoxyCodeLine{35         \}}
\DoxyCodeLine{36         shared\_ptr<T> target(\textcolor{keyword}{new} T(pioBlock, stateMachine, dataPin, numLeds, b1, b2, b3, b4));}
\DoxyCodeLine{37         targets[pioIndex][stateMachine] = target;}
\DoxyCodeLine{38         \textcolor{keywordflow}{return} PicoLedController(target);}
\DoxyCodeLine{39     \};}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{42     \textcolor{keyword}{static} PicoLedController addLeds(PIO pioBlock, uint stateMachine, uint dataPin, uint numLeds, DataFormat format) \{}
\DoxyCodeLine{43         \textcolor{keywordflow}{switch} (format) \{}
\DoxyCodeLine{44             \textcolor{keywordflow}{case} FORMAT\_RGB:}
\DoxyCodeLine{45                 \textcolor{keywordflow}{return} addLeds<T>(pioBlock, stateMachine, dataPin, numLeds, RED, GREEN, BLUE, NONE);}
\DoxyCodeLine{46             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{47             \textcolor{keywordflow}{case} FORMAT\_GRB:}
\DoxyCodeLine{48                 \textcolor{keywordflow}{return} addLeds<T>(pioBlock, stateMachine, dataPin, numLeds, GREEN, RED, BLUE, NONE);}
\DoxyCodeLine{49             \textcolor{keywordflow}{case} FORMAT\_WRGB:}
\DoxyCodeLine{50                 \textcolor{keywordflow}{return} addLeds<T>(pioBlock, stateMachine, dataPin, numLeds, RED, GREEN, BLUE, WHITE);}
\DoxyCodeLine{51         \}}
\DoxyCodeLine{52     \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{keyword}{static} Color RGB(uint8\_t red, uint8\_t green, uint8\_t blue) \{}
\DoxyCodeLine{55         \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = red, .green = green, .blue = blue, .white = std::min(std::min(red, green), blue) \};}
\DoxyCodeLine{56     \};}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keyword}{static} Color RGBW(uint8\_t red, uint8\_t green, uint8\_t blue, uint8\_t white) \{}
\DoxyCodeLine{59         \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = red, .green = green, .blue = blue, .white = white \};}
\DoxyCodeLine{60     \}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{keyword}{static} Color HSV(uint8\_t hue, uint8\_t saturation, uint8\_t value) \{}
\DoxyCodeLine{63         \textcolor{keywordflow}{if} (saturation == 0) \{}
\DoxyCodeLine{64             \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = value, .green = value, .blue = value, .white = 0 \};}
\DoxyCodeLine{65         \}}
\DoxyCodeLine{66         uint8\_t quadrant = hue / 43;}
\DoxyCodeLine{67         uint8\_t remainder = hue -\/ quadrant * 43 * 6;}
\DoxyCodeLine{68         uint8\_t p = (value * (255 -\/ saturation)) >> 8;}
\DoxyCodeLine{69         uint8\_t q = (value * (255 -\/ ((saturation * remainder) >> 8))) >> 8;}
\DoxyCodeLine{70         uint8\_t t = (value * (255 -\/ ((saturation * (255 -\/ remainder)) >> 8))) >> 8;}
\DoxyCodeLine{71         \textcolor{keywordflow}{switch} (quadrant) \{}
\DoxyCodeLine{72             \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{73                 \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = value, .green = t, .blue = p, .white = std::min(t, p) \};}
\DoxyCodeLine{74             \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{75                 \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = q, .green = value, .blue = p, .white = std::min(q, p) \};}
\DoxyCodeLine{76             \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{77                 \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = p, .green = value, .blue = t, .white = std::min(t, p) \};}
\DoxyCodeLine{78             \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{79                 \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = p, .green = q, .blue = value, .white = std::min(q, p) \};}
\DoxyCodeLine{80             \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{81                 \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = t, .green = p, .blue = value, .white = std::min(t, p) \};}
\DoxyCodeLine{82             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{83             \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{84                 \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ .red = value, .green = p, .blue = q, .white = std::min(q, p) \};}
\DoxyCodeLine{85         \}}
\DoxyCodeLine{86     \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     \textcolor{keyword}{static} Color MixColors(Color colorA, Color colorB, \textcolor{keywordtype}{double} ratio) \{}
\DoxyCodeLine{89         \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} Color)\{ }
\DoxyCodeLine{90             .red = (uint8\_t)((\textcolor{keywordtype}{double})colorA.red * ratio + (double)colorB.red * (1.0 -\/ ratio)),}
\DoxyCodeLine{91             .green = (uint8\_t)((double)colorA.green * ratio + (\textcolor{keywordtype}{double})colorB.green * (1.0 -\/ ratio)),}
\DoxyCodeLine{92             .blue = (uint8\_t)((\textcolor{keywordtype}{double})colorA.blue * ratio + (double)colorB.blue * (1.0 -\/ ratio)),}
\DoxyCodeLine{93             .white = (uint8\_t)((double)colorA.white * ratio + (\textcolor{keywordtype}{double})colorB.white * (1.0 -\/ ratio)),}
\DoxyCodeLine{94         \};}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96 \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
