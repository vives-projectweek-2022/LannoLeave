\hypertarget{i2c__slave_8h}{}\doxysection{/home/joey/\+Documents/\+School\+\_\+2021-\/2022-\/2/\+Projectweek/\+Lanno\+Leave/software/libs/i2c\+\_\+slave/include/i2c\+\_\+slave.h File Reference}
\label{i2c__slave_8h}\index{/home/joey/Documents/School\_2021-\/2022-\/2/Projectweek/LannoLeave/software/libs/i2c\_slave/include/i2c\_slave.h@{/home/joey/Documents/School\_2021-\/2022-\/2/Projectweek/LannoLeave/software/libs/i2c\_slave/include/i2c\_slave.h}}


I2C slave setup.  


{\ttfamily \#include $<$hardware/i2c.\+h$>$}\newline
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{i2c__slave_8h_a8d4821831a9a533b701eca1016021c33}\label{i2c__slave_8h_a8d4821831a9a533b701eca1016021c33}} 
typedef enum \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}{i2c\+\_\+slave\+\_\+event\+\_\+t}} {\bfseries i2c\+\_\+slave\+\_\+event\+\_\+t}
\begin{DoxyCompactList}\small\item\em I2C slave event types. \end{DoxyCompactList}\item 
typedef void($\ast$ \mbox{\hyperlink{i2c__slave_8h_af1bb7bb1e79c309b290bf0e8ccd57dff}{i2c\+\_\+slave\+\_\+handler\+\_\+t}}) (i2c\+\_\+inst\+\_\+t $\ast$i2c, \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}{i2c\+\_\+slave\+\_\+event\+\_\+t}} event)
\begin{DoxyCompactList}\small\item\em I2C slave event handler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}{i2c\+\_\+slave\+\_\+event\+\_\+t}} \{ \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca7bc1a9bb9db707479c140a49c4d62a51}{I2\+C\+\_\+\+SLAVE\+\_\+\+RECEIVE}}
, \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca495a6f0ce75738519ac201349ac38c22}{I2\+C\+\_\+\+SLAVE\+\_\+\+REQUEST}}
, \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca857dc8c139941a8f8bb6888a84e4b83f}{I2\+C\+\_\+\+SLAVE\+\_\+\+FINISH}}
, {\bfseries I2\+C\+\_\+\+GEN\+\_\+\+CALL}
 \}
\begin{DoxyCompactList}\small\item\em I2C slave event types. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{i2c__slave_8h_a2ecc43ff4a3c673a704d0c7bd7d91db4}{i2c\+\_\+slave\+\_\+init}} (i2c\+\_\+inst\+\_\+t $\ast$i2c, uint8\+\_\+t address, \mbox{\hyperlink{i2c__slave_8h_af1bb7bb1e79c309b290bf0e8ccd57dff}{i2c\+\_\+slave\+\_\+handler\+\_\+t}} handler)
\begin{DoxyCompactList}\small\item\em Configure I2C instance for slave mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{i2c__slave_8h_aebbea8f5a707f23750ba3e0c8b5eb6ee}{i2c\+\_\+slave\+\_\+deinit}} (i2c\+\_\+inst\+\_\+t $\ast$i2c)
\begin{DoxyCompactList}\small\item\em Restore I2C instance to master mode. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
I2C slave setup. 



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{i2c__slave_8h_af1bb7bb1e79c309b290bf0e8ccd57dff}\label{i2c__slave_8h_af1bb7bb1e79c309b290bf0e8ccd57dff}} 
\index{i2c\_slave.h@{i2c\_slave.h}!i2c\_slave\_handler\_t@{i2c\_slave\_handler\_t}}
\index{i2c\_slave\_handler\_t@{i2c\_slave\_handler\_t}!i2c\_slave.h@{i2c\_slave.h}}
\doxysubsubsection{\texorpdfstring{i2c\_slave\_handler\_t}{i2c\_slave\_handler\_t}}
{\footnotesize\ttfamily typedef void($\ast$ i2c\+\_\+slave\+\_\+handler\+\_\+t) (i2c\+\_\+inst\+\_\+t $\ast$i2c, \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}{i2c\+\_\+slave\+\_\+event\+\_\+t}} event)}



I2C slave event handler. 

The event handler will run from the I2C ISR, so it should return quickly (under 25 us at 400 kb/s). Avoid blocking inside the handler and split large data transfers across multiple calls for best results. When sending data to master, up to {\ttfamily i2c\+\_\+get\+\_\+write\+\_\+available()} bytes can be written without blocking. When receiving data from master, up to {\ttfamily i2c\+\_\+get\+\_\+read\+\_\+available()} bytes can be read without blocking.


\begin{DoxyParams}{Parameters}
{\em i2c} & Slave I2C instance. \\
\hline
{\em event} & Event type. \\
\hline
\end{DoxyParams}


\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}\label{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}} 
\index{i2c\_slave.h@{i2c\_slave.h}!i2c\_slave\_event\_t@{i2c\_slave\_event\_t}}
\index{i2c\_slave\_event\_t@{i2c\_slave\_event\_t}!i2c\_slave.h@{i2c\_slave.h}}
\doxysubsubsection{\texorpdfstring{i2c\_slave\_event\_t}{i2c\_slave\_event\_t}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8c}{i2c\+\_\+slave\+\_\+event\+\_\+t}}}



I2C slave event types. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{I2C\_SLAVE\_RECEIVE@{I2C\_SLAVE\_RECEIVE}!i2c\_slave.h@{i2c\_slave.h}}\index{i2c\_slave.h@{i2c\_slave.h}!I2C\_SLAVE\_RECEIVE@{I2C\_SLAVE\_RECEIVE}}}\mbox{\Hypertarget{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca7bc1a9bb9db707479c140a49c4d62a51}\label{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca7bc1a9bb9db707479c140a49c4d62a51}} 
I2\+C\+\_\+\+SLAVE\+\_\+\+RECEIVE&Data from master is available for reading. Slave must read from Rx FIFO. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{I2C\_SLAVE\_REQUEST@{I2C\_SLAVE\_REQUEST}!i2c\_slave.h@{i2c\_slave.h}}\index{i2c\_slave.h@{i2c\_slave.h}!I2C\_SLAVE\_REQUEST@{I2C\_SLAVE\_REQUEST}}}\mbox{\Hypertarget{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca495a6f0ce75738519ac201349ac38c22}\label{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca495a6f0ce75738519ac201349ac38c22}} 
I2\+C\+\_\+\+SLAVE\+\_\+\+REQUEST&Master is requesting data. Slave must write into Tx FIFO. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{I2C\_SLAVE\_FINISH@{I2C\_SLAVE\_FINISH}!i2c\_slave.h@{i2c\_slave.h}}\index{i2c\_slave.h@{i2c\_slave.h}!I2C\_SLAVE\_FINISH@{I2C\_SLAVE\_FINISH}}}\mbox{\Hypertarget{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca857dc8c139941a8f8bb6888a84e4b83f}\label{i2c__slave_8h_ad8b613f0d4e9d1b9511ca0b6d6ab7e8ca857dc8c139941a8f8bb6888a84e4b83f}} 
I2\+C\+\_\+\+SLAVE\+\_\+\+FINISH&Master has sent a Stop or Restart signal. Slave may prepare for the next transfer. \\
\hline

\end{DoxyEnumFields}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{i2c__slave_8h_aebbea8f5a707f23750ba3e0c8b5eb6ee}\label{i2c__slave_8h_aebbea8f5a707f23750ba3e0c8b5eb6ee}} 
\index{i2c\_slave.h@{i2c\_slave.h}!i2c\_slave\_deinit@{i2c\_slave\_deinit}}
\index{i2c\_slave\_deinit@{i2c\_slave\_deinit}!i2c\_slave.h@{i2c\_slave.h}}
\doxysubsubsection{\texorpdfstring{i2c\_slave\_deinit()}{i2c\_slave\_deinit()}}
{\footnotesize\ttfamily void i2c\+\_\+slave\+\_\+deinit (\begin{DoxyParamCaption}\item[{i2c\+\_\+inst\+\_\+t $\ast$}]{i2c }\end{DoxyParamCaption})}



Restore I2C instance to master mode. 


\begin{DoxyParams}{Parameters}
{\em i2c} & I2C instance. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{i2c__slave_8h_a2ecc43ff4a3c673a704d0c7bd7d91db4}\label{i2c__slave_8h_a2ecc43ff4a3c673a704d0c7bd7d91db4}} 
\index{i2c\_slave.h@{i2c\_slave.h}!i2c\_slave\_init@{i2c\_slave\_init}}
\index{i2c\_slave\_init@{i2c\_slave\_init}!i2c\_slave.h@{i2c\_slave.h}}
\doxysubsubsection{\texorpdfstring{i2c\_slave\_init()}{i2c\_slave\_init()}}
{\footnotesize\ttfamily void i2c\+\_\+slave\+\_\+init (\begin{DoxyParamCaption}\item[{i2c\+\_\+inst\+\_\+t $\ast$}]{i2c,  }\item[{uint8\+\_\+t}]{address,  }\item[{\mbox{\hyperlink{i2c__slave_8h_af1bb7bb1e79c309b290bf0e8ccd57dff}{i2c\+\_\+slave\+\_\+handler\+\_\+t}}}]{handler }\end{DoxyParamCaption})}



Configure I2C instance for slave mode. 


\begin{DoxyParams}{Parameters}
{\em i2c} & I2C instance. \\
\hline
{\em address} & 7-\/bit slave address. \\
\hline
{\em handler} & Called on events from I2C master. It will run from the I2C ISR, on the CPU core where the slave was initialized. \\
\hline
\end{DoxyParams}
